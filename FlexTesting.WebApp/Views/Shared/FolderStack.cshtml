@model IEnumerable<FlexTesting.Core.Contract.Models.Folder>

<div class="float-left" style="width:300px">
    <h4 class="text-center">Ваши папки</h4>
    <form class="form-inline p-3 flex-nowrap" method="get" action=@Url.Action("FolderSearch", "Folder")>
        <input class="form-control mr-sm-2" type="search" name="search" placeholder="Поиск..." aria-label="Поиск">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Найти</button>
    </form>
    <div class="pre-scrollable">
        @foreach (var folder in Model)
        {
            <div class="list-group-item list-group-item-action d-flex flex-row justify-content-between">
                <a href="/Folder/Folders/@folder.Id" class="text-decoration-none" style="color:black">
                    <span class="text-md-left text-truncate d-inline-block mr-md-3" style="width:200px">
                        @folder.Name
                    </span>
                </a>
                <input type="button" data-toggle="modal" onclick="clickFolder(this);" data-id="@folder.Id" data-name="@folder.Name" data-target="#delete-folder-modal" value="x" class="btn btn-outline-danger border-0 px-md-3 tag" />
            </div>
        }
    </div>
</div>
<!-- delete-folder -->
<div class="modal fade" id="delete-folder-modal" tabindex="-1" role="dialog" data-keyboard="false">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" style="max-width:500px">Удаление папки <span id="folder-name"></span></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <span>Безопасное удаление лишь скроет папку из общего списка, не удалив данные.</span>
                <div class="form-check">
                    <input type="checkbox" checked="checked" class="form-check-input" id="safe-delete" />
                    <label class="form-check-label" for="safe-delete">Безопасное удаление</label>
                </div>
            </div>
            <div class="modal-footer d-flex flex-row justify-content-center">
                <input type="button" class="btn btn-secondary" data-dismiss="modal" value="Отмена" />
                <input type="submit" onclick="deleteFolder(this);" class="btn btn-danger" data-dismiss="modal" value="Удалить" />
            </div>
        </div>
    </div>
</div>
<script>
    function clickFolder(e) {
        $("#folder-name").html(e.dataset.name);
        $("#folder-name").attr("data-id", e.dataset.id);
    };
    function deleteFolder(e) {
        var chk = $('#safe-delete').prop('checked');
        var url = '/Folder/Delete?id=' + document.getElementById('folder-name').dataset.id + '&safeDelete=' + chk;
        $.post(url, function () {
            window.location.reload();
        })
            .fail(function () {
                alert("Произошла ошибка!");
            });
    };
</script>